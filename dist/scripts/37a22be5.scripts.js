"use strict";angular.module("newOliverApp",["ngCookies","ngResource","ngSanitize","ngAnimate","ngRoute","angular-flexslider"]).config(["$routeProvider",function(a){a.when("/",{templateUrl:"views/main.html",controller:"MainCtrl"}).when("/publications",{templateUrl:"views/publications.html",controller:"PublicationsCtrl"}).when("/acquire",{templateUrl:"views/acquire.html",controller:"AcquireCtrl"}).when("/acquire-detail/:requestId",{templateUrl:"views/acquire-detail.html",controller:"AcquireDetailCtrl"}).when("/requests",{templateUrl:"views/requests.html",controller:"RequestsCtrl"}).when("/contact",{templateUrl:"views/contact.html",controller:"MainCtrl"}).otherwise({redirectTo:"/"})}]).directive("gallery",function(){return{restrict:"A",templateUrl:"views/gallery.html",scope:{gallery:"="},link:function(a){a.link=a.gallery.link,a.title=a.gallery.title,a.elements=angular.copy(a.gallery.elements),a.num=a.gallery.elements.length}}}).directive("shopImage",["$cookies",function(){return{rescrict:"A",templateUrl:"views/shop-image.html",transclude:!0,scope:{shopImage:"=",id:"=index"},link:function(){}}}]),angular.module("newOliverApp").factory("requests",["$cookies",function(a){var b=function(){return"undefined"==typeof a.requests?[]:JSON.parse(a.requests)},c=function(b){a.requests=JSON.stringify(b)};return{addRequest:function(a,b){this.requests.push({id:a,requestOption:b}),c(this.requests)},deleteRequest:function(a){this.requests.splice(a,1),c(this.requests)},deleteAll:function(){this.requests=[],c(this.requests)},isRequested:function(a,b){var c=this.requests.filter(function(c){return c.id===a&&c.requestOption===b});return void 0!==c},requests:b(),requestOptions:[{title:"uiae",price:"500 eure",description:"habeda habeda"}],selection:[{title:"Lorem ipsum",description:"this is a beautiful image description. Thank you.",price:"200,00€ - 400€",image:"images/a_tempo/perlensaue_oliverblohm_zink_carobruchmann_02.jpg"},{title:"Lorem ipsum",price:"",image:"images/a_tempo/perlensaue_oliverblohm_zink_carobruchmann_02.jpg"},{title:"Lorem ipsum",price:"",image:"images/a_tempo/perlensaue_oliverblohm_zink_carobruchmann_02.jpg"},{title:"Lorem ipsum",price:"",image:"images/a_tempo/perlensaue_oliverblohm_zink_carobruchmann_02.jpg"},{title:"Lorem ipsum",price:"",image:"images/a_tempo/perlensaue_oliverblohm_zink_carobruchmann_02.jpg"}]}}]),angular.module("newOliverApp").controller("MainCtrl",["$scope",function(a){a.mainSlides=["01","02","03","04","05","06","07","08","09","10","11","12","13","14","15","16","17","18","19","20","21","22","23"],a.afterSlideshow=function(a){$(".current_pos").text(a.currentSlide+1)},a.startSlideshow=function(a){$(".total").text(a.count)},a.nextSlideshow=function(){$(".flexslider").flexslider("next")},a.prevSlideshow=function(){$(".flexslider").flexslider("prev")}}]),angular.module("newOliverApp").controller("BasketCtrl",["$scope","$cookies","requests",function(a,b,c){a.$watch(function(){return c.requests},function(){a.basket=c.requests})}]),angular.module("newOliverApp").controller("PublicationsCtrl",["$scope",function(a){a.galleries=[{title:"PERSEPHONE for ODALISQUE MAGAZINE",link:"http://oliverblohm.blogspot.de/2014/04/odalisque-magazine-persephone.html",elements:["images/persephone/persephone_odalisquemagazine_oliverblohm_01.jpg","images/persephone/persephone_odalisquemagazine_oliverblohm_02.jpg","images/persephone/persephone_odalisquemagazine_oliverblohm_03.jpg","images/persephone/persephone_odalisquemagazine_oliverblohm_04.jpg","images/persephone/persephone_odalisquemagazine_oliverblohm_05.jpg","images/persephone/persephone_odalisquemagazine_oliverblohm_06.jpg","images/persephone/persephone_odalisquemagazine_oliverblohm_07.jpg"]},{title:"NACHKRIEGSZEIT/ POSTWAR for KALTBLUT MAGAZINE ",link:"http://oliverblohm.blogspot.de/2014/03/kaltblut-magazine-nachkriegszeit-postwar.html",elements:["images/nkz/nachkriegszeit_postwar_oliverblohm_kaltblutmagazine_naladiagouraga_01.jpg","images/nkz/nachkriegszeit_postwar_oliverblohm_kaltblutmagazine_naladiagouraga_02.jpg","images/nkz/nachkriegszeit_postwar_oliverblohm_kaltblutmagazine_naladiagouraga_03.jpg","images/nkz/nachkriegszeit_postwar_oliverblohm_kaltblutmagazine_naladiagouraga_04.jpg","images/nkz/nachkriegszeit_postwar_oliverblohm_kaltblutmagazine_naladiagouraga_05.jpg","images/nkz/nachkriegszeit_postwar_oliverblohm_kaltblutmagazine_naladiagouraga_06.jpg","images/nkz/nachkriegszeit_postwar_oliverblohm_kaltblutmagazine_naladiagouraga_07.jpg","images/nkz/nachkriegszeit_postwar_oliverblohm_kaltblutmagazine_naladiagouraga_08.jpg","images/nkz/nachkriegszeit_postwar_oliverblohm_kaltblutmagazine_naladiagouraga_09.jpg","images/nkz/nachkriegszeit_postwar_oliverblohm_kaltblutmagazine_naladiagouraga_10.jpg","images/nkz/nachkriegszeit_postwar_oliverblohm_kaltblutmagazine_naladiagouraga_11.jpg","images/nkz/nachkriegszeit_postwar_oliverblohm_kaltblutmagazine_naladiagouraga_12.jpg","images/nkz/nachkriegszeit_postwar_oliverblohm_kaltblutmagazine_naladiagouraga_13.jpg","images/nkz/nachkriegszeit_postwar_oliverblohm_kaltblutmagazine_naladiagouraga_14.jpg","images/nkz/nachkriegszeit_postwar_oliverblohm_kaltblutmagazine_naladiagouraga_15.jpg"]},{title:"A TEMPO for ZINK MAGAZINE",link:"http://oliverblohm.blogspot.de/2013/10/a-tempo-for-zink-magazine.html",elements:["images/a_tempo/perlensaue_oliverblohm_zink_carobruchmann_01.jpg","images/a_tempo/perlensaue_oliverblohm_zink_carobruchmann_02.jpg","images/a_tempo/perlensaue_oliverblohm_zink_carobruchmann_03.jpg","images/a_tempo/perlensaue_oliverblohm_zink_carobruchmann_04.jpg","images/a_tempo/perlensaue_oliverblohm_zink_carobruchmann_05.jpg","images/a_tempo/perlensaue_oliverblohm_zink_carobruchmann_06.jpg","images/a_tempo/perlensaue_oliverblohm_zink_carobruchmann_07.jpg","images/a_tempo/perlensaue_oliverblohm_zink_carobruchmann_08.jpg","images/a_tempo/perlensaue_oliverblohm_zink_carobruchmann_09.jpg","images/a_tempo/perlensaue_oliverblohm_zink_carobruchmann_10.jpg","images/a_tempo/perlensaue_oliverblohm_zink_carobruchmann_11.jpg","images/a_tempo/perlensaue_oliverblohm_zink_carobruchmann_12.jpg"]}],a.lulu=["images/persephone/persephone_odalisquemagazine_oliverblohm_01.jpg","images/persephone/persephone_odalisquemagazine_oliverblohm_02.jpg","images/persephone/persephone_odalisquemagazine_oliverblohm_03.jpg","images/persephone/persephone_odalisquemagazine_oliverblohm_07.jpg"],a.lala=["images/a_tempo/perlensaue_oliverblohm_zink_carobruchmann_01.jpg","images/a_tempo/perlensaue_oliverblohm_zink_carobruchmann_11.jpg","images/a_tempo/perlensaue_oliverblohm_zink_carobruchmann_12.jpg"],$(".publications .gallery").hide(),$(".publications li> a:first-child").click(function(a){$(".publications li").removeClass("active"),$(this).parent().toggleClass("active"),1==$(this).parent().find(".gallery").is(":visible")?$(".publications .gallery").slideUp():($(".publications .gallery").slideUp(),$(this).parent().find(".gallery").slideToggle()),a.preventDefault()}),$(".flexslider").flexslider({slideshow:!1,controlNav:!0,directionNav:!0,prevText:"<",nextText:">",controlsContainer:"flexslider",after:function(a){a.find(".current_pos").text(a.currentSlide+1)},start:function(a){a.find(".total").text("/ "+a.count)}}),$(".slides").click(function(){$(this).parent().flexslider("next")}),$(".prev").click(function(a){$(this).parent().parent().flexslider("prev"),a.preventDefault()}),$(".next").click(function(a){$(this).parent().parent().flexslider("next"),a.preventDefault()})}]),angular.module("newOliverApp").controller("AcquireCtrl",["$scope","$cookies","requests",function(a,b,c){a.selection=c.selection}]),angular.module("newOliverApp").controller("AcquireDetailCtrl",["$scope","$cookies","$routeParams","requests","$timeout",function(a,b,c,d,e){a.showOverlay=!1,a.id=parseInt(c.requestId),a.requestOptions=d.requestOptions;var f=d.selection[a.id];a.image=f.image,a.title=f.title,a.price=f.price,a.description=f.description,a.addRequest=function(b,c){d.addRequest(b,c),a.showOverlay=!0,a.chosen=d.requestOptions[c].title,e(function(){a.showOverlay=!1},1800)}}]),angular.module("newOliverApp").controller("RequestsCtrl",["$scope","requests","$http","$location","$timeout",function(a,b,c,d,e){a.showOverlay=!1,a.$watch(function(){return b.requests},function(){f()});var f=function(){a.requests=b.requests.map(function(a){return{title:b.selection[a.id].title,description:b.requestOptions[a.requestOption].description,image:b.selection[a.id].image,price:b.requestOptions[a.requestOption].price}})};a.deleteItem=function(a){b.deleteRequest(a),f()},a.sendRequest=function(){var f=b.requests.map(function(a){return b.selection[a.id].title+"\n"+b.requestOptions[a.requestOption].description+"\n"+b.requestOptions[a.requestOption].price+"\n"}),g={email:a.email,name:a.name,message:a.message,requests:f.join("\n")};c({method:"POST",url:"/backend/mailer.php",data:g}).success(function(){a.showSuccess=!0,e(function(){a.showSuccess=!1,b.deleteAll(),d.path("/acquire")},2e3)}).error(function(){a.showError=!0,e(function(){a.showError=!1},2e3)})}}]);